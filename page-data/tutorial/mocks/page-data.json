{"componentChunkName":"component---node-modules-availity-gatsby-theme-docs-src-index-js","path":"/tutorial/mocks/","result":{"data":{"site":{"siteMetadata":{"title":"Availity Docs","subtitle":"Availity Workflow","description":"Documentation for Availity Workflow"}},"file":{"childMarkdownRemark":{"frontmatter":{"title":"Bring on the Mocks","summary":null},"headings":[{"value":"Mock Data Structure","depth":2},{"value":"Starting Mock Server","depth":2},{"value":"Example","depth":2},{"value":"Adding API Code Snippet","depth":3},{"value":"Adding a new Route","depth":3},{"value":"Adding Response Data","depth":3}],"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When developing Availity applications there is no use in a UI that doesn't connect to some data source. There are a few ways a developer can get data when developing locally:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Proxy requests from the local webpack-dev-server to the target API environment and have the proxy handle the authentication."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Spin up a local mock server to accept inbound requests and respond with fake data."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Lucky for you, we have built a local mock server into workflow that will return mock data for most of the APIs that we support."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"mock-data-structure"},"children":[{"type":"element","tagName":"a","properties":{"href":"#mock-data-structure","ariaLabel":"mock data structure permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Mock Data Structure"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"img","properties":{"width":"100%","src":"/availity-workflow/fdcbdd6ea46e9658ed3c35698b382afb/mock-data.png","alt":"Mock Data Structure"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Inside of the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"config"}]},{"type":"text","value":" folder is a file titled "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"routes.json"}]},{"type":"text","value":". This contains an object "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"key/value"}]},{"type":"text","value":" pair of all the API routes you override from your UI."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In our case, we have an API call being made that requests data from "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/ms/api/availity/internal/spc/slotmachine/graphql"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The key of the nested object is a "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"file"}]},{"type":"text","value":" type, thus we specify its a "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"file"}]},{"type":"text","value":" and the value is the path to the data file we want returned."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The above pictured scenario can be explained by saying \"the specified path will return JSON containing the data from the file "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"data/slotmachine.data"}]},{"type":"text","value":". Note that the JSON will be returned for any type of request method, and parameters passed in. See the full list of "},{"type":"element","tagName":"a","properties":{"href":"/availity-workflow/reference/mock-server/#route-configuration-examples"},"children":[{"type":"text","value":"examples"}]},{"type":"text","value":" for more advanced configurations."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"starting-mock-server"},"children":[{"type":"element","tagName":"a","properties":{"href":"#starting-mock-server","ariaLabel":"starting mock server permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Starting Mock Server"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"By default, if you have not modified your "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"workflow.js"}]},{"type":"text","value":" file the mock server will automatically start up and be running. This can be disabled by setting "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"development.mock.enabled"}]},{"type":"text","value":" to "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"false"}]},{"type":"text","value":" in the configuration file."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The easiest way to know if the server is running is you should see a message saying "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Ekko servered started at..."}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-shell"],"dataMeta":"hideCopy=true"},"children":[{"type":"text","value":"Workspaces/workflow-app is ðŸ“¦ v0.1.0 via â¬¢ v12.14.0 took 11s 487ms yarn start\nyarn run v1.21.1\n$ av start\nâ€º REACT\nâ€º Using project/config/workflow.js\nâ€º Using @availity/workflow/public/index.html\nâ€º Using @availity/workflow/public/favicon.ico\nâ€º Webpack 0% compiling\nâ€º Webpack 10% building\nâ€º Proxy created: [ '/api', '/ms' ] -> http://localhost:51484\nâ€º Proxy rewrite rule created: \"^/api\" ~> \"\"\nâ„¹ ï½¢wdsï½£: Project is running at http://localhost:3000/\nâ„¹ ï½¢wdsï½£: webpack output is served from undefined\nâ„¹ ï½¢wdsï½£: Content not from webpack is served from /Users/kgray/Workspaces/proving-grounds/workflow-app/build\nâ„¹ ï½¢wdsï½£: 404s will fallback to /index.html\nâ€º Started development server\nâ€º Loading plugin @availity/mock-data\nâ€º Ekko server started at http://localhost:51484\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"example"},"children":[{"type":"element","tagName":"a","properties":{"href":"#example","ariaLabel":"example permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Example"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The best way to learn is by examples and that is what we are going to do here."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We are going to clear out the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"App.js"}]},{"type":"text","value":" file for tesing purposes and instead paste the below code snippet."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"adding-api-code-snippet"},"children":[{"type":"element","tagName":"a","properties":{"href":"#adding-api-code-snippet","ariaLabel":"adding api code snippet permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Adding API Code Snippet"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-jsx"],"dataMeta":"header=App.js"},"children":[{"type":"text","value":"import React, { useEffect, useState } from 'react';\nimport { avUserApi } from '@availity/api-axios';\n\nconst App = () => {\n    const [name, setName] = useState(''); // initialize state\n\n    const fetchData = async () => {\n        const user = await avUserApi.me(); // Request current user\n\n        setName(user.firstName); // set the name to state\n    };\n\n    // Fetch the user on component mount\n    useEffect(() => {\n        fetchData();\n    }, []);\n\n    return <div>Hello {name}</div>;\n};\n\nexport default App;\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The above code snippet runs a method called "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"fetchData"}]},{"type":"text","value":" on mount that will fetch the user's "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"firstName"}]},{"type":"text","value":" using the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"avUserApi"}]},{"type":"text","value":" from "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@availity/api-axios"}]},{"type":"text","value":". You can read more on what that resource looks like "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/Availity/sdk-js/tree/master/packages/api-axios"},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Since we know the route is going to look like "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"api/sdk/platform/v1/users/me"}]},{"type":"text","value":" we can mock it out in the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"routes.json"}]},{"type":"text","value":" by adding the following to our file:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"adding-a-new-route"},"children":[{"type":"element","tagName":"a","properties":{"href":"#adding-a-new-route","ariaLabel":"adding a new route permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Adding a new Route"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-json"],"dataMeta":"header=routes.json"},"children":[{"type":"text","value":"{\n    \"ms/api/availity/internal/spc/slotmachine/graphql\": {\n        \"file\": \"slotmachine.json\"\n    },\n    \"sdk/platform/v1/users/me\": {\n        \"file\": \"user.json\"\n    }\n}\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Note that we can strip the prefixing "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/api"}]},{"type":"text","value":" as the mock server takes that off automatically."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"adding-response-data"},"children":[{"type":"element","tagName":"a","properties":{"href":"#adding-response-data","ariaLabel":"adding response data permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Adding Response Data"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now that we have the route we need to mock out our "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"user.json"}]},{"type":"text","value":" response:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-json"],"dataMeta":"header=user.json"},"children":[{"type":"text","value":"{\n    \"firstName\": \"Kyle\"\n}\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We added a simple response object with one key that is the "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"firstName"}]},{"type":"text","value":" used to render in the App."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If your application is currently running you will need to restart it as the mock server will need to be restarted in order to get the updated mock data."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If all goes correct you should see the Application rendering"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"],"dataMeta":"hideCopy=true"},"children":[{"type":"text","value":"Hello Kyle\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For more examples you checkout the "},{"type":"element","tagName":"a","properties":{"href":"/availity-workflow/reference/mock-server/#route-configuration-examples"},"children":[{"type":"text","value":"mock server reference page"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Congratulations on making it this far! By now you should be able to fully build out an application API ready. Next we will discuss the build steps that workflow provides and how to get your application deployed on our portal."}]}],"data":{"quirksMode":false}}},"childMdx":null}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"f902f83a-9eb6-527a-99ac-89c607656cee","sidebarContents":[{"title":null,"depth":0,"pages":[{"title":"Introduction","path":"/","depth":1,"pages":false},{"title":"Quick Start","path":"/quick-start/","depth":1,"pages":false}]},{"title":"Tutorial","depth":0,"pages":[{"title":"Getting Started","path":"/tutorial/","depth":1,"pages":false},{"title":"Bring on the Mocks","path":"/tutorial/mocks/","depth":1,"pages":false},{"title":"Creating a Deployment","path":"/tutorial/deploy/","depth":1,"pages":false},{"title":"Dependency Management","path":"/tutorial/dependency-management/","depth":1,"pages":false}]},{"title":"Recipes","depth":0,"pages":[{"title":"Testing Libraries","path":"/recipes/testing-libraries/","depth":1,"pages":false},{"title":"Configuring Root Imports","path":"/recipes/root-imports/","depth":1,"pages":false},{"title":"Adding Typescript Support","path":"/recipes/typescript/","depth":1,"pages":false},{"title":"Setting up Logging","path":"/recipes/logging/","depth":1,"pages":false}]},{"title":"API Reference","depth":0,"pages":[{"title":"Reference: Workflow Configuration","path":"/reference/workflow-config/","depth":1,"pages":false},{"title":"Reference: CLI Commands","path":"/reference/commands/","depth":1,"pages":false},{"title":"Reference: Mock Server","path":"/reference/mock-server/","depth":1,"pages":false}]}],"gitType":"github","gitUrl":"https://github.com/availity/availity-workflow/tree/master/docs/source/tutorial/mocks.md","baseUrl":"https://availity.github.io","navItems":[{"text":"Getting Started","value":"/availity-workflow","matchRegex":"^/availity-workflow"},{"text":"Components","value":"/availity-react","matchRegex":"^/availity-react"},{"text":"Resources","value":"/sdk-js","matchRegex":"^/sdk-js"}]}}}